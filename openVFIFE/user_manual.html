<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="GinkGo">
    
    <title>
        
        GinkGo
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="https://gitee.com/ginkgoltd/pictures/raw/master/img/ginkgo.jpg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"ginkgoltd.githut.io","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":false,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"https://gitee.com/ginkgoltd/pictures/raw/master/img/ginkgo.jpg","favicon":"https://gitee.com/ginkgoltd/pictures/raw/master/img/ginkgo.jpg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"openVFIFE is a open source vector form intrinsic finite element method software"},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.4.3"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                GinkGo
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class="active"
                               href="/openVFIFE"
                            >
                                OPENVFIFE
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                CATEGORIES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/links"
                            >
                                LINKS
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ABOUT
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class="active"
                       href="/openVFIFE">OPENVFIFE</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">CATEGORIES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/links">LINKS</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="page-template-container">
        
        
        <div class="page-template-content markdown-body">
            
                <h1 id="user-guide">User Guide</h1>
<p>Welcome to openVFIFE.</p>
<p>This is a very short guide on how to get started with <a class="link"   target="_blank" rel="noopener" href="https://ginkgoltd.github.io/" >openVFIFE<i class="fas fa-external-link-alt"></i></a>. It has a dual purpose. It serves as a minimal introduction to the <a class="link"   target="_blank" rel="noopener" href="https://ginkgoltd.github.io/" >openVFIFE<i class="fas fa-external-link-alt"></i></a> library for people who want to start coding as soon as possible. You can also read this page as the first part of the Tutorial, which explains the library in more detail.</p>
<h1 id="what-is-openvfife">What is openVFIFE?</h1>
<p>The openVFIFE is a <code>C++</code> library for structural nonliear dynamic analysis and discontinuous behaviour analysis based on vector form intrinsic finite element method (referred to as VFIFE).</p>
<p><strong>Motivation: </strong> The VFIFE has already been applied in many research fields, and has made great achievements. However, there is no available software/platform for it, which is an main obstcale of the development and popularization of VFIFE. On the other hand, the author (Tan Biao or GinkGo) tries to introduce VFIFE into the collapse analysis of transmission tower. For this reason, the <em>openVFIFE</em> has been implemented to provide a general VFIFE analysis software/platform for researchers or engineers who interested in VFIFE.</p>
<p><strong>Final goal: </strong> The openVFIFE is currently released in the form of <code>C++</code> library. But it will never stop here. A completely independent cross-platform software package is my ultimate goal. The author will continue to work hard for this. And the contributions from all of you are quite important. If you have any suggestions or advices, or want to contribute new codes , please contact me (ginkgoltd@outlook.com).</p>
<p><strong>Main Characters: </strong></p>
<ul>
<li>openVFIFE is a completely open source library, which strictly abides by GNU/GPL v3.0 License (see LICENSE file).</li>
<li>openVFIFE is fast.</li>
<li>openVFIFE is reliable.</li>
<li>openVFIFE is user- and developer-friendly.</li>
<li>openVFIFE is scalable.</li>
</ul>
<h1 id="quick-start">Quick Start</h1>
<h2 id="how-to-install-openvfife">How to install openVFIFE?</h2>
<p>In order to use  <a class="link"   target="_blank" rel="noopener" href="https://ginkgoltd.github.io/" >openVFIFE<i class="fas fa-external-link-alt"></i></a>, you just need to download and extract <a class="link"   target="_blank" rel="noopener" href="https://ginkgoltd.github.io/" >openVFIFE<i class="fas fa-external-link-alt"></i></a>'s source code. The header files in the <code>headers</code> subdirectory and the static library file in the './library' are the only files required to compile programs using  <a class="link"   target="_blank" rel="noopener" href="https://ginkgoltd.github.io/" >openVFIFE<i class="fas fa-external-link-alt"></i></a>. The header files are the same for all platforms. It is not necessary to use CMake or install anything.</p>
<h2 id="a-simple-first-program">A simple first program</h2>
<p>Here is a rather simple program to get you started.</p>
<p>Consider a single bar structure(as shown in the following figure) , the length <span class="math inline">\(l = 10m\)</span>, the section area is <span class="math inline">\(1m^2\)</span>, Young's modulus <span class="math inline">\(E=10^6Pa\)</span> , mass density <span class="math inline">\(\rho = 10 kg/m^3\)</span>. In this case, I want to show you how to use openVFIFE to solve static problems, and explain the influence of damping coefficient and time step.</p>
<p><img src="https://gitee.com/ginkgoltd/pictures/raw/master/img/example2.jpg"/></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;../../headers/structsystem.h&quot;</span> <span class="comment">// see ./examples/example2/example2.cpp</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// create system</span></span><br><span class="line">    StructSystem system = <span class="built_in">StructSystem</span>(<span class="number">1</span>);</span><br><span class="line">    system.<span class="built_in">setJobname</span>(<span class="string">&quot;example2&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// solve parameters</span></span><br><span class="line">    <span class="keyword">double</span> endTime = <span class="number">50.0</span>;		<span class="comment">// total time, s</span></span><br><span class="line">    <span class="keyword">double</span> h = <span class="number">1.0e-3</span>;		    <span class="comment">// time step, s </span></span><br><span class="line">    <span class="keyword">double</span> p = <span class="number">100</span>;			    <span class="comment">// load, N</span></span><br><span class="line">    <span class="keyword">double</span> zeta = <span class="number">0.5</span>;			<span class="comment">// damping coefficient</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// create particles</span></span><br><span class="line">    Particle * p1 = <span class="keyword">new</span> <span class="built_in">Particle</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    Particle * p2 = <span class="keyword">new</span> <span class="built_in">Particle</span>(<span class="number">2</span>, <span class="number">10</span>, <span class="number">0</span>);</span><br><span class="line">    system.<span class="built_in">addParticle</span>(p1);</span><br><span class="line">    system.<span class="built_in">addParticle</span>(p2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create material</span></span><br><span class="line">    LinearElastic mat = <span class="built_in">LinearElastic</span>(<span class="number">1</span>);</span><br><span class="line">    mat.<span class="built_in">setE</span>(<span class="number">1.0E6</span>);</span><br><span class="line">    mat.<span class="built_in">setDensity</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create section</span></span><br><span class="line">    CustomSectionParas paras = &#123;.A=<span class="number">1</span>, .Sy=<span class="number">0</span>, .Sz=<span class="number">0</span>, .SHy=<span class="number">0</span>, .SHz=<span class="number">0</span>,</span><br><span class="line">                                .CGy=<span class="number">0</span>, .CGz=<span class="number">0.0</span>, .Iyy=<span class="number">10</span>, .Izz=<span class="number">10</span>, .Iyz=<span class="number">10</span>&#125;;</span><br><span class="line">    CustomSection sect = <span class="built_in">CustomSection</span>(<span class="number">1</span>, paras);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create elements</span></span><br><span class="line">    Link2D* e = <span class="keyword">new</span> <span class="built_in">Link2D</span>(<span class="number">1</span>, p1, p2, &amp;mat, &amp;sect);</span><br><span class="line">    system.<span class="built_in">addElement</span>(e);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// constraints</span></span><br><span class="line">    DOF c1 = &#123;.key = &#123;<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>&#125;,</span><br><span class="line">              .val = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">    DOF c2 = &#123;.key = &#123;<span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>&#125;,</span><br><span class="line">              .val = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">    system.<span class="built_in">addConstraint</span>(<span class="number">1</span>, c1);</span><br><span class="line">    system.<span class="built_in">addConstraint</span>(<span class="number">2</span>, c2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// save model</span></span><br><span class="line">    string path = system.<span class="built_in">workdir</span>() + <span class="string">&quot;/&quot;</span> + system.<span class="built_in">jobname</span>() + <span class="string">&quot;/model&quot;</span>;</span><br><span class="line">    system.<span class="built_in">saveModel</span>(path);</span><br><span class="line">    system.<span class="built_in">info</span>();      <span class="comment">// print structsystem information</span></span><br><span class="line"></span><br><span class="line">    StdArray6d f1 = &#123;<span class="number">100</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> nStep = <span class="built_in">ceil</span>(endTime/h);</span><br><span class="line">    cout &lt;&lt; nStep &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">int</span> interval = <span class="built_in">ceil</span>(<span class="number">0.1</span>/h);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= nStep; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            system.<span class="built_in">addExternalForce</span>(<span class="number">2</span>, f1);            <span class="comment">// add external force</span></span><br><span class="line">            system.<span class="built_in">solve</span>(h, zeta, <span class="literal">true</span>);</span><br><span class="line">            system.<span class="built_in">setInternalForce</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            system.<span class="built_in">solve</span>(h, zeta);</span><br><span class="line">            system.<span class="built_in">clearParticleForce</span>();</span><br><span class="line">            system.<span class="built_in">setExternalForce</span>(<span class="number">2</span>, f1);</span><br><span class="line">            system.<span class="built_in">setInternalForce</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// save results</span></span><br><span class="line">        <span class="keyword">if</span> (i % interval == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            string path = system.<span class="built_in">workdir</span>() + <span class="string">&quot;/&quot;</span> + system.<span class="built_in">jobname</span>() + <span class="string">&quot;/&quot;</span> +</span><br><span class="line">                          <span class="built_in">to_string</span>(i*h);</span><br><span class="line">            system.<span class="built_in">saveParticleResult</span>(path);</span><br><span class="line">            system.<span class="built_in">saveElementResult</span>(path);</span><br><span class="line">            system.<span class="built_in">saveSupportReact</span>(path);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    system.<span class="built_in">releaseContainers</span>(); <span class="comment">// release the projects, it&#x27;s important for avoiding memory leakage</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>We will explain the program after telling you how to complie it.</p>
<h2 id="compiling-and-running-your-first-program">Compiling and running your first program</h2>
<p>The only thing that you need to keep in mind when compiling the above program is that the compiler must be able to find the <a class="link"   target="_blank" rel="noopener" href="https://ginkgoltd.github.io/" >openVFIFE<i class="fas fa-external-link-alt"></i></a> header files. The directory in which you placed <a class="link"   target="_blank" rel="noopener" href="https://ginkgoltd.github.io/" >openVFIFE<i class="fas fa-external-link-alt"></i></a>s source code must be in the include path. With GCC you use the -L option to achieve this, so you can compile the program with a command like this:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -statick -O3 xxx.cpp -L /path/to/static/library -lvfife -o xxx.out</span><br></pre></td></tr></table></figure>
<p>On Windows or Mac OS, you need to comiple all the files by yourself. In future, I will provide a makefile for <code>cmake</code>, but now you should compile <a class="link"   target="_blank" rel="noopener" href="https://ginkgoltd.github.io/" >openVFIFE<i class="fas fa-external-link-alt"></i></a> by yourself. Here are the commands for compile a static library in Linux.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> change to the src directory</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> g++ -c -O3 element.cpp gridsection.cpp integrator.cpp material.cpp particle.cpp section.cpp structsystem.cpp</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> ar rcs libvfife.a element.o gridsection.o integrator.o material.o particle.o section.o structsystem.o</span></span><br></pre></td></tr></table></figure>
<h2 id="explanation-of-the-first-program">Explanation of the first program</h2>
<h3 id="basic-procedures-of-openvfife">Basic procedures of openVFIFE</h3>
<p>openVFIFE is quite simple and intuitive. The basic procedures of a calculation is as follows:</p>
<ol type="1">
<li>create a <strong>StructSystem</strong> to manage all struct objects</li>
<li>create <strong>Particle</strong>s</li>
<li>create <strong>Material</strong>s and <strong>Section</strong>s (necessary in bar structures)</li>
<li>create <strong>Elements</strong></li>
<li>add constraints</li>
<li>add external force and solve</li>
</ol>
<h3 id="step-1-create-a-structsystem-object">step 1: create a StructSystem object</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create system</span></span><br><span class="line">StructSystem system = <span class="built_in">StructSystem</span>(<span class="number">1</span>);</span><br><span class="line">system.<span class="built_in">setJobname</span>(<span class="string">&quot;example2&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><code>StructSystem::StructSystem(int id)</code> is the constructor of the StructSystem class, you need to give a <code>int</code> number for represent the <code>id</code> of the structrure. And <code>StructSystem::setjobname(const std::string &amp;jobname)</code> give a method to assign the name of the project, which will help create a <code>./jobname</code> directory in the current working directory to restore the computing results.</p>
<h3 id="step-2-create-particles">step 2: create <strong>Particle</strong>s</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create particles</span></span><br><span class="line">Particle* p1 = <span class="keyword">new</span> <span class="built_in">Particle</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">Particle* p2 = <span class="keyword">new</span> <span class="built_in">Particle</span>(<span class="number">2</span>, <span class="number">10</span>, <span class="number">0</span>);</span><br><span class="line">system.<span class="built_in">addParticle</span>(p1);</span><br><span class="line">system.<span class="built_in">addParticle</span>(p2);</span><br></pre></td></tr></table></figure>
<p><code>Particle::Particle(int id, double x, double y, double z=0)</code> create a <code>Particle</code> object, which has a unique id and located at <span class="math inline">\((x, y, z)\)</span> in global coordinate system. Then using <code>StructSystem::addParticle(Particle* p)</code> to put the <code>Particle</code> object into <code>system</code> object in order to manage the <code>Particle</code> objects.</p>
<h3 id="step-3-create-materials-and-sections-necessary-in-bar-structures">step 3: create <strong>Material</strong>s and <strong>Section</strong>s (necessary in bar structures)</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create material</span></span><br><span class="line">LinearElastic mat = <span class="built_in">LinearElastic</span>(<span class="number">1</span>);</span><br><span class="line">mat.<span class="built_in">setE</span>(<span class="number">1.0E6</span>);</span><br><span class="line">mat.<span class="built_in">setDensity</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// create section</span></span><br><span class="line">CustomSectionParas paras = &#123;.A=<span class="number">1</span>, .Sy=<span class="number">0</span>, .Sz=<span class="number">0</span>, .SHy=<span class="number">0</span>, .SHz=<span class="number">0</span>,</span><br><span class="line">                            .CGy=<span class="number">0</span>, .CGz=<span class="number">0.0</span>, .Iyy=<span class="number">10</span>, .Izz=<span class="number">10</span>, .Iyz=<span class="number">10</span>&#125;;</span><br><span class="line">CustomSection sect = <span class="built_in">CustomSection</span>(<span class="number">1</span>, paras);</span><br></pre></td></tr></table></figure>
<p><code>LinearElastic::LinearElastic(int id)</code> create a <code>LinearElastic</code> material object; <code>LinearElastic::setE(double val)</code> and <code>LinearElastic::setDensity(double val)</code> set the Young's modulus and density of the material respectively. <a class="link"   target="_blank" rel="noopener" href="https://ginkgoltd.github.io/" >openVFIFE<i class="fas fa-external-link-alt"></i></a> also provide <code>UniIdeal</code> and <code>UniBilinear</code> for uniaxial rate-independent plastic material, you can read the headers in <code>./headers/material</code> directory.</p>
<p><code>CustomSetcion::CustomSection(int id, const CustomSectionParas &amp;para)</code> create a <code>CustomSection</code> object, which means you can assign the section characteristics. <a class="link"   target="_blank" rel="noopener" href="https://ginkgoltd.github.io/" >openVFIFE<i class="fas fa-external-link-alt"></i></a> also provide <code>Rectangle</code>, <code>AngleSteel</code> and <code>Ctube</code> sections, you can read the headers in <code>./headers/section</code> directory.</p>
<h3 id="step-4-create-elements">step 4: create <strong>Elements</strong></h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create elements</span></span><br><span class="line">Link2D* e = <span class="keyword">new</span> <span class="built_in">Link2D</span>(<span class="number">1</span>, p1, p2, &amp;mat, &amp;sect);</span><br><span class="line">system.<span class="built_in">addElement</span>(e);</span><br></pre></td></tr></table></figure>
<p><code>Link2D::Link2D(int id, Particle* pi, Particle* pj, const BaseMaterial* mat, const BaseSection* sect)</code> create a planar link element. <code>StructSystem::addElement(BaseElement* e)</code> put the element into <code>system</code>.</p>
<h3 id="step-5-add-constraints">step 5: add constraints</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// constraints, Ux, Uy, Uz, Rotx, Roty, Rotz</span></span><br><span class="line">DOF c1 = &#123;.key = &#123;<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>&#125;,</span><br><span class="line">          .val = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">DOF c2 = &#123;.key = &#123;<span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>&#125;,</span><br><span class="line">          .val = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">system.<span class="built_in">addConstraint</span>(<span class="number">1</span>, c1);</span><br><span class="line">system.<span class="built_in">addConstraint</span>(<span class="number">2</span>, c2);</span><br></pre></td></tr></table></figure>
<p><code>StructSystem::addConstraint(int pid, const DOF &amp;d)</code> constraint <code>Paricle</code> pid.</p>
<h3 id="step-6-add-external-force-and-solve">step 6: add external force and solve</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// external force, typedef array&lt;double, 6&gt; StdArray6d;</span></span><br><span class="line">StdArray6d f1 = &#123;<span class="number">100</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> nStep = <span class="built_in">ceil</span>(endTime/h);</span><br><span class="line"><span class="keyword">int</span> interval = <span class="built_in">ceil</span>(<span class="number">0.1</span>/h);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= nStep; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">0</span>)	<span class="comment">// first step</span></span><br><span class="line">    &#123;</span><br><span class="line">		system.<span class="built_in">addExternalForce</span>(<span class="number">2</span>, f1);            <span class="comment">// add external force</span></span><br><span class="line">		system.<span class="built_in">solve</span>(h, zeta, <span class="literal">true</span>);</span><br><span class="line">		system.<span class="built_in">setInternalForce</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>	   <span class="comment">// n &gt; 1</span></span><br><span class="line">    &#123;</span><br><span class="line">		system.<span class="built_in">solve</span>(h, zeta);</span><br><span class="line">		system.<span class="built_in">clearParticleForce</span>();</span><br><span class="line">		system.<span class="built_in">setExternalForce</span>(<span class="number">2</span>, f1);</span><br><span class="line">		system.<span class="built_in">setInternalForce</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// save results</span></span><br><span class="line">    <span class="keyword">if</span> (i % interval == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">		string path = system.<span class="built_in">workdir</span>() + <span class="string">&quot;/&quot;</span> + system.<span class="built_in">jobname</span>() + <span class="string">&quot;/&quot;</span> + <span class="built_in">to_string</span>(i*h);</span><br><span class="line">		system.<span class="built_in">saveParticleResult</span>(path);</span><br><span class="line">		system.<span class="built_in">saveElementResult</span>(path);</span><br><span class="line">		system.<span class="built_in">saveSupportReact</span>(path);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>int nStep = ceil(endTime/h);</code> calculate the total time steps <span class="math inline">\(n = \frac{t}{\Delta t}\)</span></p>
<p>If you do not want save results of every step, you can set a <code>int interval = ceil(0.1/h);</code> for skip some steps.</p>
<p>In the first time step, we set external force by <code>StructSystem::addExternalFroce(int pid, const StdArray6d &amp;force)</code> of Particle (id). Then <code>StructSystem::solve(double h, double zeta, const bool firststep)</code> solve the gorverning equation at <span class="math inline">\(t=0\)</span>. Then <code>StructSystem::setInternalForce()</code> assign all element internal force to all Particles.</p>
<p>In the other step (<span class="math inline">\(t&gt;0\)</span>), <code>StructSystem::solve(double h, double zeta, const bool firststep=false)</code> solve the governing equation (movement of all the particles). <code>StructSystem::clearParticleForce()</code> remove all the forces acted on the particles, and then <code>StructSystem::setExternalForce(int pid, const StdArray6d &amp;force)</code> add the external forces, <code>StructSystem::setInternalForce()</code> add the element internal force to all particles.</p>
<p><code>string path = system.workdir() + "/" + system.jobname() + "/" + to_string(i*h);</code> set the directory for saving results. <code>StructSystem::saveParticleResult(const string &amp;path)</code>, <code>StructSystem::saveElementResult(const string &amp;path)</code> and <code>StructSystem::saveSupportReact(const string &amp;path)</code> save the computing results of all particles, elements and support reactions.</p>
<h3 id="results">Results</h3>
<p>when <span class="math inline">\(\Delta t = 0.01\)</span>, the axail force of the bar</p>
<table>
<thead>
<tr class="header">
<th><span class="math inline">\(\zeta\)</span></th>
<th>Target (N)</th>
<th>openVFIFE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0.0</td>
<td>100.0</td>
<td>--</td>
</tr>
<tr class="even">
<td>0.5</td>
<td>100.0</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td>1.0</td>
<td>100.0</td>
<td>100.0</td>
</tr>
</tbody>
</table>
<p><img src="https://gitee.com/ginkgoltd/pictures/raw/master/img/damping.svg" /></p>
<p>if <span class="math inline">\(\zeta= 0.0\)</span>, the axial force of the bar will not converge (umdamped free vibration); and when <span class="math inline">\(\zeta\)</span> increased, the answer will finally converge to the static solution, and the larger <span class="math inline">\(\zeta\)</span> is, the faster convergence is. Besides, <span class="math inline">\(\zeta\)</span> won't affect the static solution. Hence, for static problems, large <span class="math inline">\(\zeta\)</span> could be adopted to help converge.</p>
<p><strong>The critical time step</strong> <span class="math display">\[
\Delta t_{critical} = \frac{2l}{v_c} = \frac{2l}{\sqrt{E/\rho}}=0.0316s
\]</span> when <span class="math inline">\(\zeta= 0.5\)</span>, the axail force of the bar</p>
<table>
<thead>
<tr class="header">
<th><span class="math inline">\(\Delta t\)</span></th>
<th>Target (N)</th>
<th>openVFIFE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0.001</td>
<td>100.0</td>
<td>99.89860658682635</td>
</tr>
<tr class="even">
<td>0.01</td>
<td>100.0</td>
<td>99.89854111776447</td>
</tr>
<tr class="odd">
<td>0.1</td>
<td>100.0</td>
<td>nan</td>
</tr>
<tr class="even">
<td>0.5</td>
<td>100.0</td>
<td>nan</td>
</tr>
</tbody>
</table>
<p><img src="https://gitee.com/ginkgoltd/pictures/raw/master/img/timestep.svg" /></p>
<ol type="a">
<li></li>
</ol>
<p><img src="https://gitee.com/ginkgoltd/pictures/raw/master/img/timestep1.svg" /></p>
<ol start="2" type="a">
<li></li>
</ol>
<p>Fig. Axial Force of The Bar, (a) <span class="math inline">\(\Delta t = 0.001, 0.01\)</span>, (b) <span class="math inline">\(\Delta t = 0.001, 0.01, 0.1, 0.5\)</span>,</p>
<p><strong>If <span class="math inline">\(\Delta t &gt; \Delta t_{critical}\)</span>, the solution will unconverge,</strong> hence it is important to assign time step. openVFIFE provides a <code>autoTimeStep()</code> function for setting proper time step automaticly.</p>
<p>For more examples, see <code>./examples</code>.</p>
<h2 id="where-to-go-from-here">Where to go from here?</h2>
<p>The detailed and completed documentations for users and developers are still under construction. The author hope the researchers who are interested on <strong>vector form instrinsic finite element</strong> can contribute to this project for building a easy and robust general software.</p>
<h1 id="todo-list">TODO LIST</h1>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
provide a detailed and well organized documentation for users and developers</li>
<li><input type="checkbox" disabled="" />
write <code>makefiles</code></li>
<li><input type="checkbox" disabled="" />
write a unittest for this library</li>
<li><input type="checkbox" disabled="" />
redesign and refactor the project to fit more incoming functions</li>
<li><input type="checkbox" disabled="" />
introduce a script language (<code>tcl/tk</code>, <code>lua</code> or <code>python3</code>) to make the software easy to use</li>
</ul>
<h1 id="ultimate-goal">Ultimate Goal</h1>
<ul>
<li>build a open source software like <code>openSees</code> and <code>openFoam</code></li>
</ul>

            
        </div>
        <div class="page-template-comments">
            
        </div>
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2021</span>&nbsp;-&nbsp;
            
            2021&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">GinkGo</a>
        </div>
        
            <script async  src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.3</a>
        </div>
        
    </div>
</footer>

        </div>
    </div>

    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/code-copy.js"></script>




<div class="post-scripts">
    
</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
